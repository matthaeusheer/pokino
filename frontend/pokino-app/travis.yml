language: generic
os: linux
dist: bionic

services:
  - docker

jobs:
  include:
    - stage: test
      name: "Frontend - Tests"
      before_install:
        - cd frontend/pokino-app
        - docker build -t frontend_image -f Dockerfile_CI .
      script:
        - npm run test-coverage
        - ng test-prod
        after_script:
          - if [[ "$TRAVIS_TEST_RESULT" == 0 ]]; then ./node_modules/.bin/codecov; fi
